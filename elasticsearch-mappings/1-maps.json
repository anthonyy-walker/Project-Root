{
  "settings": {
    "number_of_shards": 2,
    "number_of_replicas": 1,
    "index": {
      "max_result_window": 10000,
      "refresh_interval": "5s"
    },
    "analysis": {
      "analyzer": {
        "map_name_analyzer": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": ["lowercase", "asciifolding"]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "id": { "type": "keyword" },
      "mnemonic": { "type": "keyword" },
      "namespace": { "type": "keyword" },
      "name": {
        "type": "text",
        "analyzer": "map_name_analyzer",
        "fields": {
          "keyword": { "type": "keyword", "ignore_above": 256 },
          "raw": { "type": "keyword" }
        }
      },
      "tagline": {
        "type": "text",
        "fields": { "keyword": { "type": "keyword", "ignore_above": 1024 } }
      },
      "introduction": {
        "type": "text",
        "fields": { "keyword": { "type": "keyword", "ignore_above": 1024 } }
      },
      "image_url": { "type": "keyword", "index": false },
      "image_urls": {
        "type": "object",
        "properties": {
          "url": { "type": "keyword", "index": false },
          "url_m": { "type": "keyword", "index": false },
          "url_s": { "type": "keyword", "index": false }
        }
      },
      "lobby_image_url": { "type": "keyword", "index": false },
      "tags": { "type": "keyword" },
      "genre_labels": { "type": "keyword" },
      "category_labels": { "type": "keyword" },
      "matchmaking": {
        "type": "object",
        "properties": {
          "min_players": { "type": "integer" },
          "max_players": { "type": "integer" },
          "max_team_size": { "type": "integer" },
          "max_team_count": { "type": "integer" },
          "allow_join_in_progress": { "type": "boolean" },
          "use_skill_based_matchmaking": { "type": "boolean" }
        }
      },
      "ccu_record": { "type": "integer" },
      "ccu_record_date": { "type": "date" },
      "lastSyncCcu": { "type": "integer" },
      "lastSyncDate": { "type": "date" },
      "minutes_played": { "type": "long" },
      "owner_code": { "type": "keyword" },
      "owner_name": {
        "type": "text",
        "fields": { "keyword": { "type": "keyword" } }
      },
      "owner_account_id": { "type": "keyword" },
      "published": { "type": "date" },
      "created": { "type": "date" },
      "updated": { "type": "date" },
      "version": { "type": "integer" },
      "xp_enabled": { "type": "boolean" },
      "xp_calibration_phase": { "type": "keyword" },
      "link_state": { "type": "keyword" },
      "link_type": { "type": "keyword" },
      "discovery_intent": { "type": "keyword" },
      "moderation_status": { "type": "keyword" },
      "active": { "type": "boolean" },
      "disabled": { "type": "boolean" },
      "locale": { "type": "keyword" },
      "project_id": { "type": "keyword" },
      "quicksilver_id": { "type": "keyword" },
      "last_activated_date": { "type": "date" },
      "activated_public_date": { "type": "date" },
      "creator": {
        "type": "object",
        "properties": {
          "id": { "type": "keyword" },
          "name": {
            "type": "text",
            "fields": { "keyword": { "type": "keyword" } }
          },
          "display_name": { "type": "keyword" },
          "follower_count": { "type": "integer" },
          "bio": { "type": "text" },
          "avatar_url": { "type": "keyword", "index": false },
          "total_ccu": { "type": "integer" }
        }
      },
      "metrics": {
        "type": "object",
        "properties": {
          "favorites": { "type": "integer" },
          "unique_players": { "type": "integer" },
          "plays": { "type": "long" },
          "sessions": { "type": "long" },
          "recommendations": { "type": "integer" },
          "average_minutes_per_player": { "type": "float" },
          "retention_d1": { "type": "float" },
          "retention_d7": { "type": "float" },
          "last_updated": { "type": "date" }
        }
      },
      "performance": {
        "type": "object",
        "properties": {
          "avg_ccu_24h": { "type": "integer" },
          "avg_ccu_7d": { "type": "integer" },
          "avg_ccu_30d": { "type": "integer" },
          "peak_ccu_24h": { "type": "integer" },
          "peak_ccu_7d": { "type": "integer" },
          "peak_ccu_30d": { "type": "integer" },
          "total_plays_24h": { "type": "long" },
          "total_plays_7d": { "type": "long" },
          "total_plays_30d": { "type": "long" }
        }
      },
      "discovery_summary": {
        "type": "object",
        "properties": {
          "currently_featured": { "type": "boolean" },
          "current_panels": { "type": "keyword" },
          "total_panels_appeared": { "type": "integer" },
          "first_discovery_date": { "type": "date" },
          "days_in_discovery": { "type": "integer" },
          "highest_position_ever": { "type": "integer" },
          "last_panel_update": { "type": "date" }
        }
      },
      "ranking": {
        "type": "object",
        "properties": {
          "global_rank": { "type": "integer" },
          "category_rank": { "type": "integer" },
          "trending_score": { "type": "float" },
          "growth_rate_24h": { "type": "float" },
          "growth_rate_7d": { "type": "float" }
        }
      },
      "flags": {
        "type": "object",
        "properties": {
          "is_trending": { "type": "boolean" },
          "is_featured": { "type": "boolean" },
          "is_new": { "type": "boolean" },
          "is_epic_verified": { "type": "boolean" },
          "is_active": { "type": "boolean" }
        }
      },
      "metadata": {
        "type": "object",
        "properties": {
          "first_indexed": { "type": "date" },
          "last_updated": { "type": "date" },
          "last_ingestion": { "type": "date" },
          "ingestion_source": { "type": "keyword" },
          "data_quality_score": { "type": "float" }
        }
      }
    }
  }
}
